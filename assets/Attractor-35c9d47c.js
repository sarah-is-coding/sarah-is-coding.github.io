import{_ as v}from"./index-1f9aee6c.js";import{Attract as m}from"./index-a533af6c.js";import{m as u,C as p,i as s}from"./Utils-eafc054a.js";import{E as h}from"./ExternalInteractorBase-029fb1b6.js";const c="attract";class M extends h{constructor(a,t){super(t),this._engine=a,t.attract||(t.attract={particles:[]}),this.handleClickMode=i=>{const o=this.container.actualOptions,e=o.interactivity.modes.attract;if(!(!e||i!==c)){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const r of t.attract.particles)this.isEnabled(r)&&r.velocity.setTo(r.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},e.duration*u)}}}clear(){}init(){const a=this.container,t=a.actualOptions.interactivity.modes.attract;t&&(a.retina.attractModeDistance=t.distance*a.retina.pixelRatio)}async interact(){const a=this.container,t=a.actualOptions,i=a.interactivity.status===p,o=t.interactivity.events,{enable:e,mode:r}=o.onHover,{enable:n,mode:f}=o.onClick;if(i&&e&&s(c,r)){const{hoverAttract:l}=await v(()=>import("./Utils-9608dfb4.js"),["assets/Utils-9608dfb4.js","assets/Circle-5dff518c.js","assets/Utils-eafc054a.js"]);l(this.container,d=>this.isEnabled(d))}else if(n&&s(c,f)){const{clickAttract:l}=await v(()=>import("./Utils-9608dfb4.js"),["assets/Utils-9608dfb4.js","assets/Circle-5dff518c.js","assets/Utils-eafc054a.js"]);l(this.container,d=>this.isEnabled(d))}}isEnabled(a){const t=this.container,i=t.actualOptions,o=t.interactivity.mouse,e=((a==null?void 0:a.interactivity)??i.interactivity).events;if((!o.position||!e.onHover.enable)&&(!o.clickPosition||!e.onClick.enable))return!1;const r=e.onHover.mode,n=e.onClick.mode;return s(c,r)||s(c,n)}loadModeOptions(a,...t){a.attract||(a.attract=new m);for(const i of t)a.attract.load(i==null?void 0:i.attract)}reset(){}}export{M as Attractor};
