import{_ as l}from"./index-e7819eac.js";import{V as d}from"./ValueWithRandom-341d57b0.js";import{g as r,h as u,m as a}from"./Utils-eafc054a.js";import"./AnimationOptions-c2d1747c.js";class y extends d{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class h extends d{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class m{constructor(){this.count=0,this.delay=new y,this.duration=new h}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const o=0,f=1,c=-1;class L{constructor(e){this.container=e}async init(e){const i=this.container,n=e.options,s=n.life;s&&(e.life={delay:i.retina.reduceFactor?r(s.delay.value)*(s.delay.sync?f:u())/i.retina.reduceFactor*a:o,delayTime:o,duration:i.retina.reduceFactor?r(s.duration.value)*(s.duration.sync?f:u())/i.retina.reduceFactor*a:o,time:o,count:s.count},e.life.duration<=o&&(e.life.duration=c),e.life.count<=o&&(e.life.count=c),e.life&&(e.spawning=e.life.delay>o),await Promise.resolve())}isEnabled(e){return!e.destroyed}loadOptions(e,...i){e.life||(e.life=new m);for(const n of i)e.life.load(n==null?void 0:n.life)}async update(e,i){if(!this.isEnabled(e)||!e.life)return;const{updateLife:n}=await l(()=>import("./Utils-571e8d7a.js"),["assets/Utils-571e8d7a.js","assets/Utils-eafc054a.js"]);n(e,i,this.container.canvas.size)}}export{L as LifeUpdater};
