import{s as r,d,b as O,c as P,e as S,g as h,a as D,r as w,p as b}from"./Utils-eafc054a.js";import{V as y,R}from"./ValueWithRandom-341d57b0.js";import{O as g}from"./OptionsColor-6893f21d.js";import{A as x}from"./AnimatableColor-23c04ac7.js";import{R as C}from"./AnimationOptions-c2d1747c.js";class k{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}}class A{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class z extends y{constructor(){super(),this.value=1}}class M{constructor(){this.horizontal=new z,this.vertical=new z}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class B{constructor(){this.absorb=new k,this.bounce=new M,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new A}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=r(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class _{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(!e)return;const i=e.options;if(i!==void 0)for(const s in i){const o=i[s];o&&(this.options[s]=d(this.options[s]??{},o))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class F{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=r(e.offset)),e.value!==void 0&&(this.value=r(e.value)))}}class I{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(e&&(e.distance!==void 0&&(this.distance=r(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const i=e.rotate.x;i!==void 0&&(this.rotate.x=i);const s=e.rotate.y;s!==void 0&&(this.rotate.y=s)}}}class T{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class V{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=r(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=r(e.maxSpeed)))}}class E{constructor(){this.clamp=!0,this.delay=new y,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=d(this.options,e.options)))}}class j{load(e){e&&(e.color!==void 0&&(this.color=g.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class N{constructor(){this.enable=!1,this.length=10,this.fill=new j}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}class L{constructor(){this.default="out"}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class W{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=r(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=d({},e.position)))}}class G{constructor(){this.angle=new F,this.attract=new I,this.center=new T,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new V,this.path=new E,this.outModes=new L,this.random=!1,this.size=!1,this.speed=2,this.spin=new W,this.straight=!1,this.trail=new N,this.vibrate=!1,this.warp=!1}load(e){if(!e)return;this.angle.load(O(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=r(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=O(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=r(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const i=e.outModes;i!==void 0&&(P(i)?this.outModes.load(i):this.outModes.load({default:i})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=r(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class U extends C{constructor(){super(),this.destroy="none",this.speed=2}load(e){super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class X extends R{constructor(){super(),this.animation=new U,this.value=1}load(e){if(!e)return;super.load(e);const i=e.animation;i!==void 0&&this.animation.load(i)}}class Y{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const i=e.width;i!==void 0&&(this.width=i);const s=e.height;s!==void 0&&(this.height=s)}}class Z{constructor(){this.mode="delete",this.value=0}load(e){e&&(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class q{constructor(){this.density=new Y,this.limit=new Z,this.value=0}load(e){e&&(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}class H{constructor(){this.blur=0,this.color=new g,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=g.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}class J{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(!e)return;const i=e.options;if(i!==void 0)for(const s in i){const o=i[s];o&&(this.options[s]=d(this.options[s]??{},o))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class K extends C{constructor(){super(),this.destroy="none",this.speed=5}load(e){super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class Q extends R{constructor(){super(),this.animation=new K,this.value=3}load(e){if(super.load(e),!e)return;const i=e.animation;i!==void 0&&this.animation.load(i)}}class a{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=x.create(this.color,e.color)),e.width!==void 0&&(this.width=r(e.width)),e.opacity!==void 0&&(this.opacity=r(e.opacity)))}}class $ extends y{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class ee{constructor(e,i){this._engine=e,this._container=i,this.bounce=new M,this.collisions=new B,this.color=new x,this.color.value="#fff",this.effect=new _,this.groups={},this.move=new G,this.number=new q,this.opacity=new X,this.reduceDuplicates=!1,this.shadow=new H,this.shape=new J,this.size=new Q,this.stroke=new a,this.zIndex=new $}load(e){if(!e)return;if(e.groups!==void 0)for(const s of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,s))continue;const o=e.groups[s];o!==void 0&&(this.groups[s]=d(this.groups[s]??{},o))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(x.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=d({},e.interactivity));const i=e.stroke;if(i&&(this.stroke=S(i,s=>{const o=new a;return o.load(s),o})),this._container){const s=this._engine.updaters.get(this._container);if(s)for(const n of s)n.loadOptions&&n.loadOptions(this,e);const o=this._engine.interactors.get(this._container);if(o)for(const n of o)n.loadParticlesOptions&&n.loadParticlesOptions(this,e)}}}function ie(t,...e){for(const i of e)t.load(i)}function se(t,e,...i){const s=new ee(t,e);return ie(s,...i),s}class te{load(e){e&&(e.bottom!==void 0&&(this.bottom=r(e.bottom)),e.left!==void 0&&(this.left=r(e.left)),e.right!==void 0&&(this.right=r(e.right)),e.top!==void 0&&(this.top=r(e.top)))}}class oe extends y{constructor(){super(),this.value=3}}class ne extends y{constructor(){super(),this.value={min:4,max:9}}}class re{constructor(){this.count=1,this.factor=new oe,this.rate=new ne,this.sizeOffset=!0}load(e){e&&(e.color!==void 0&&(this.color=g.create(this.color,e.color)),e.count!==void 0&&(this.count=e.count),this.factor.load(e.factor),this.rate.load(e.rate),this.particles=S(e.particles,i=>d({},i)),e.sizeOffset!==void 0&&(this.sizeOffset=e.sizeOffset),e.colorOffset&&(this.colorOffset=this.colorOffset??{},e.colorOffset.h!==void 0&&(this.colorOffset.h=e.colorOffset.h),e.colorOffset.s!==void 0&&(this.colorOffset.s=e.colorOffset.s),e.colorOffset.l!==void 0&&(this.colorOffset.l=e.colorOffset.l)))}}class le{constructor(){this.bounds=new te,this.mode="none",this.split=new re}load(e){e&&(e.mode&&(this.mode=e.mode),e.bounds&&this.bounds.load(e.bounds),this.split.load(e.split))}}const v=0,fe=.5,ce=0,he=1,ue=500,de=0;async function pe(t,e,i,s){const o=i.options.destroy;if(!o)return;const n=o.split,l=se(t,e,i.options),c=h(n.factor.value),u=i.getFillColor();n.color?l.color.load(n.color):n.colorOffset&&u?l.color.load({value:{hsl:{h:u.h+h(n.colorOffset.h??v),s:u.s+h(n.colorOffset.s??v),l:u.l+h(n.colorOffset.l??v)}}}):l.color.load({value:{hsl:i.getFillColor()}}),l.move.load({center:{x:i.position.x,y:i.position.y,mode:"precise"}}),O(l.size.value)?l.size.value/=c:(l.size.value.min/=c,l.size.value.max/=c),l.load(s);const m=n.sizeOffset?r(-i.size.value,i.size.value):v,p={x:i.position.x+w(m),y:i.position.y+w(m)};return e.particles.addParticle(p,l,i.group,f=>f.size.value<fe?!1:(f.velocity.length=w(r(i.velocity.length,f.velocity.length)),f.splitCount=(i.splitCount??ce)+he,f.unbreakable=!0,setTimeout(()=>{f.unbreakable=!1},ue),!0))}async function me(t,e,i){const s=i.options.destroy;if(!s)return;const o=s.split;if(o.count>=de&&(i.splitCount===void 0||i.splitCount++>o.count))return;const n=h(o.rate.value),l=D(o.particles);for(let c=0;c<n;c++)await pe(t,e,i,l)}class Oe{constructor(e,i){this.container=i,this.engine=e}async init(e){const i=this.container,s=e.options,o=s.destroy;if(!o)return;e.splitCount=0;const n=o.bounds;e.destroyBounds||(e.destroyBounds={});const{bottom:l,left:c,right:u,top:m}=n,{destroyBounds:p}=e,f=i.canvas.size;l&&(p.bottom=h(l)*f.height/b),c&&(p.left=h(c)*f.width/b),u&&(p.right=h(u)*f.width/b),m&&(p.top=h(m)*f.height/b),await Promise.resolve()}isEnabled(e){return!e.destroyed}loadOptions(e,...i){e.destroy||(e.destroy=new le);for(const s of i)e.destroy.load(s==null?void 0:s.destroy)}particleDestroyed(e,i){if(i)return;const s=e.options.destroy;s&&s.mode==="split"&&me(this.engine,this.container,e)}async update(e){if(!this.isEnabled(e))return;const i=e.getPosition(),s=e.destroyBounds;s&&((s.bottom!==void 0&&i.y>=s.bottom||s.left!==void 0&&i.x<=s.left||s.right!==void 0&&i.x>=s.right||s.top!==void 0&&i.y<=s.top)&&e.destroy(),await Promise.resolve())}}export{Oe as DestroyUpdater};
